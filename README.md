# 1. Постановка задачи
Целью данной работы является проведение комплексного анализа продаж компьютерных игр с использованием методов больших данных. Анализ позволит выявить ключевые тенденции и факторы, влияющие на успех игр на рынке, а также спрогнозировать будущие продажи.
Для проведения анализа мы поставили ряд задач: 
- Анализ продаж по регионам.
- Вычисление корреляции между оценкой и продажами.
- Выявление самых популярных игр.
- Выявление самых популярных жанров.
- Выявление самых популярных платформ.
- Предсказание продаж следующей игры серии.
- Распределение разработчиков игр по оценкам критиков.
- Топ жанров по оценкам критиков и общим продажам.
- Топ издателей по кол-ву выпущенных тайтлов и объёму продаж







# 2. Описание датасета
Датаcет vgchartz представляет собой набор данных о продажах компьютерных игр в различных регионах, а также содержит оценки критиков, имя издателя и разработчика, жанр и прочая информация, характеризующая игру. Данные были собраны посредством парсинга с такого ресурса, как vgchartz.com.

![структура датасета](/img/1.png)
<p style="text-align:center">
    Рис. 1 - структура датасета.
</p>


# 3. Ход работы
Для выполнения работы мы использовали такие инструменты, как pySpark, matplotlib.
Каждое из приведенных выше задач мы реализовывали в виде python функции и запускали в отдельном App.py файле. 

## Задача 1. Анализ продаж по регионам
В данном задании мы анализировали продажи игр по регионам. Сначала, в функции get_game_sales_by_regions, мы отфильтровали строки df по названию игры и сгруппировали данные по колонке title, суммируя продажи в разных регионах: Северной Америке (na_sales), Японии (jp_sales), регионе PAL (pal_sales) и других регионах (other_sales). Затем данные выводятся на экран и передаются в функцию visualize_game_sales_by_regions.
Во второй функции, visualize_game_sales_by_regions, данные преобразуются в формат Pandas DataFrame, чтобы построить диаграммы распределения продаж по регионам для каждой игры. Для каждой группы игр создаются графики, которые сохраняются в виде изображений.

![график продаж по регионам определенной игры.](/img/2.png)
<p style="text-align:center">
    Рис. 2 - график продаж по регионам определенной игры.
</p>


## Задача 2. Вычисление корреляции между оценкой и продажами
В данном задании мы вычисляли корреляцию между оценками критиков и продажами игр. Сначала, в функции get_game_sale_estimates, мы очистили DataFrame от строк с отсутствующими значениями в колонках: оценки критиков (critic_score), продажи в Северной Америке (na_sales), Японии (jp_sales), регионе PAL (pal_sales), других регионах (other_sales) и общие продажи (total_sales).
Затем мы вычислили корреляцию между оценками критиков и продажами в каждом регионе, сохранив результаты в словаре correlations, и вывели их на экран.
Далее мы преобразовали очищенные данные в формат Pandas DataFrame и передали их в функции build_sales_distribution_by_critic_score_plot и build_heatmap_correlation_matrix для визуализации.
Первая функция строит гистограмму распределения оценок критиков, а вторая — тепловую карту матрицы корреляции, отображающую взаимосвязи между оценками критиков и продажами в различных регионах.

![тепловая карта, характеризующая корреляцию между продажами в различных регионах и оценками критиков](/img/3.png)
<p style="text-align:center">
    Рис. 3 - тепловая карта, характеризующая корреляцию между продажами в различных регионах и оценками критиков
</p>


![график распределения объёма продаж по оценкам критиков](/img/4.png)
<p style="text-align:center">
    Рис. 4 - график распределения объёма продаж по оценкам критиков
</p>


## Задача 3. Выявление самых популярных игр
В данном задании мы выявляли самые популярные игры по регионам. Сначала, в функции get_popular_games_by_region, мы сгруппировали данные DataFrame  по колонке с названием игры (title) и агрегировали данные по указанному региону (region_column), суммируя продажи. Также были выбраны первые значения для жанра (genre), издателя (publisher), разработчика (developer), оценки критиков (critic_score) и даты выпуска (release_date).
Затем мы округлили числовые значения в полученном DataFrame до трех знаков после запятой и отсортировали данные по продажам в указанном регионе в порядке убывания. Итоговый DataFrame был выведен на экран и передан в функцию visualize_popular_games.
Во второй функции, visualize_popular_games, данные преобразуются в формат Pandas DataFrame и строится круговая диаграмма, отображающая доли продаж самых популярных игр в указанном регионе.

![диаграмма самых популярных игр по региону na_sales](/img/5.png)
<p style="text-align:center">
    Рис. 5 – диаграмма самых популярных игр по региону na_sales
</p>

## Задача 4. Выявление самых популярных жанров
В данном задании мы выявляли самые популярные жанры по регионам. Сначала, в функции get_popular_genres_by_region, мы сгруппировали данные DataFrame по колонке с жанром (genre) и агрегировали данные по указанному региону (region_column), суммируя продажи. Полученные данные были отсортированы по продажам в указанном регионе в порядке убывания и округлены до трех знаков после запятой.
Затем агрегированные данные выводятся на экран и передаются в функцию visualize_popular_genres.
Во второй функции, visualize_popular_genres, данные преобразуются в формат Pandas DataFrame и строится круговая диаграмма, отображающая процентное соотношение продаж для каждого жанра в указанном регионе.

![диаграмма, характеризующая популярность жанров игр по результатам продаж.](/img/6.png)
<p style="text-align:center">
    Рис. 6 - диаграмма, характеризующая популярность жанров игр по результатам продаж.
</p>


## Задача 5. Выявление самых популярных платформ
В данном задании мы выявляли самые популярные платформы по регионам. Сначала, в функции get_popular_platforms_by_region, мы сгруппировали данные DataFrame по колонке с названием консоли (console) и агрегировали данные по указанному региону (region_column), суммируя продажи. Полученные данные были отсортированы по продажам в указанном регионе в порядке убывания и округлены до трех знаков после запятой.
Затем агрегированные данные выводятся на экран и передаются в функцию visualize_popular_platforms_by_region.
Во второй функции, visualize_popular_platforms_by_region, данные преобразуются в формат Pandas DataFrame и строится круговая диаграмма, отображающая объем продаж для каждой платформы в указанном регионе.

![Рис. 7 - диаграмма, характеризующая долю платформы в том или ином регионе.](/img/7.png)
<p style="text-align:center">
    Рис. 7 - диаграмма, характеризующая долю платформы в том или ином регионе.
</p>


## Задача 6. Предсказание продаж игр серии
В данном задании мы предсказывали успех будущих игр серии. Сначала, в функции predict_game_success, мы фильтруем данные DataFrame по названию серии игр game_series_name и выбираем необходимые колонки, преобразуя типы данных и заполняя пропуски.
Далее мы выделяем региональные продажи и оценки критиков в отдельные признаки, используя VectorAssembler. Затем разделяем данные на обучающую и тестовую выборки.
Для обучения модели используется линейная регрессия (LinearRegression), которая обучается на обучающей выборке и оценивается на тестовой выборке, вычисляя корень средней квадратичной ошибки (RMSE).
Для предсказания успеха следующей игры серии создается новый DataFrame new_game с данными новой игры, который также преобразуется в формат, пригодный для модели. На основе этих данных модель делает прогноз, и предсказанные значения выводятся на экран.
Возвращается предсказанное значение продаж для новой игры серии.

![Рис. 8 – данные, для которых будет производиться прогноз продаж и оценки](/img/8.png)
<p style="text-align:center">
    Рис. 8 – данные, для которых будет производиться прогноз продаж и оценки
</p>

![прогноз продаж и оценки для игры.](/img/9.png)
<p style="text-align:center">
    Рис. 9 – прогноз продаж и оценки для игры.
</p>

## Задача 7.  Распределение разработчиков игр по оценкам критиков
В данном задании мы выявляли распределение разработчиков игр по оценкам критиков. Сначала, в функции get_top_developers_by_critic_score, мы преобразуем данные DataFrame в формат Pandas DataFrame и группируем их по колонке developer, вычисляя среднее значение оценок критиков (critic_score) и сумму продаж (total_sales) для каждого разработчика.
Затем мы сортируем разработчиков по среднему значению оценок критиков и общим продажам в порядке убывания. Отбираем топ-10 разработчиков с оценками критиков, у которых общие продажи превышают 10 млн.
Полученные данные передаются в функцию visualize_df.
Во второй функции, visualize_df, данные визуализируются с помощью Seaborn, создавая график, где на оси X отображаются оценки критиков, на оси Y — общие продажи.

![график распределения разработчиков по оценкам критиков и объему продаж.](/img/10.png)
<p style="text-align:center">
    Рис. 10 - график распределения разработчиков по оценкам критиков и объему продаж.
</p>

## Задача 8.  Топ жанров по оценкам критиков и общим продажам
В данном задании мы выявляли топ жанров по оценкам критиков и общим продажам. Сначала, в функции get_top_genres_by_critic_score_and_sales, мы группируем данные DataFrame по колонке genre и вычисляем медианное значение оценок критиков (critic_score) и сумму продаж (total_sales) для каждого жанра. Затем сортируем данные по убыванию оценок критиков и продаж. Полученный DataFrame преобразуется в формат Pandas DataFrame и передается в функцию visualize_df.
Во второй функции, visualize_df, данные визуализируются с помощью Seaborn. Создаются два графика:
1.	На первом графике отображаются жанры с самыми высокими медианными оценками критиков. Для каждого жанра на оси X отображается название жанра, а на оси Y — медианное значение оценки критиков. Столбцы графика окрашены в разные цвета, и на них нанесены метки значений.
2.	На втором графике отображаются жанры с самыми высокими общими продажами. На оси X отображается название жанра, а на оси Y — общие продажи. Столбцы графика также окрашены в разные цвета и имеют метки значений. Значения на оси Y форматированы в миллионах.

![график топа жанров по оценкам критиков и объему продаж](/img/11.png)
<p style="text-align:center">
    Рис. 11 - график топа жанров по оценкам критиков и объему продаж
</p>


## Задача 9. Топ издателей по кол-ву выпущенных тайтлов и объёму продаж
В данном задании мы выявляли топ издателей по количеству выпущенных тайтлов и объему продаж. Сначала, в функции get_top_sales_performance_by_publisher, мы группируем данные DataFrame df по колонке publisher, суммируя общие продажи (total_sales) и подсчитывая количество выпущенных тайтлов (title). Затем данные сортируются по убыванию общих продаж и преобразуются в формат Pandas DataFrame.
Из полученных данных выделяются топ-10 издателей по общим продажам и топ-10 издателей по количеству выпущенных тайтлов.
Далее данные визуализируются с помощью Seaborn. Создаются два графика:
1. На первом графике отображается количество выпущенных тайтлов для каждого издателя. На оси X отображается количество тайтлов, а на оси Y — названия издателей. Столбцы графика окрашены в разные цвета, и на них нанесены метки значений.
2. На втором графике отображается объем продаж для каждого издателя. На оси X отображается объем продаж в миллионах, а на оси Y — названия издателей. Столбцы графика также окрашены в разные цвета и имеют метки значений.

![топ издателей по кол-ву выпущенных тайтлов.](/img/12.png)
<p style="text-align:center">
    Рис. 12 - топ издателей по кол-ву выпущенных тайтлов.
</p>

![топ издателей по объему продаж](/img/13.png)
<p style="text-align:center">
    Рис. 13 - топ издателей по объему продаж
</p>


# 4. Заключение
В ходе выполнения данной работы мы провели комплексный анализ продаж компьютерных игр, используя разнообразные методы больших данных. Наши исследования охватили несколько ключевых аспектов, важных для понимания рынка компьютерных игр и определения факторов, влияющих на их успех.
1.	Продажи по регионам: Мы выявили существенные различия в региональных предпочтениях. Игры, популярные в Северной Америке, часто не находят такого же отклика в Японии и наоборот. Это подчеркивает необходимость адаптации маркетинговых стратегий и разработки игр с учетом культурных особенностей каждого региона.
2.	Анализ платформ: Наше исследование показало, что различные платформы имеют свои уникальные аудитории и популярные жанры. Это знание помогает разработчикам и издателям фокусироваться на наиболее перспективных платформах для их продуктов.
3.	Оценки игр и продажи: Мы обнаружили положительную корреляцию между высокими оценками критиков и успешностью продаж игр. Это подчеркивает важность качества продукта и отзывов критиков в формировании потребительского спроса.
4.	Предсказание будущих продаж: Разработанная нами модель прогнозирования продаж показала удовлетворительные результаты, демонстрируя возможность использования машинного обучения для предсказания успеха будущих игр. Это предоставляет разработчикам и издателям инструмент для более точного планирования своих действий.
В заключение наше исследование предоставило глубокое понимание рынка компьютерных игр и выявило ключевые факторы, влияющие на их продажи. Эти выводы могут быть использованы для оптимизации стратегий разработки и маркетинга, что в конечном итоге приведет к более успешным и востребованным продуктам на рынке.
